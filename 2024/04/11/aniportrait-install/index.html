<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta name="google-site-verification" content="eEw6V669AoSRTYx6k8e-WaCx3ZaeY-o43Hv6PBKPzvY" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>干货教程【AI篇】|腾讯开源数字人工具AniPortrait整合包获取和使用教程 &mdash; 考拉AI</title><link rel="stylesheet" href="https://koalai.org/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://koalai.org/assets/css/components/collection.css"><link rel="stylesheet" href="https://koalai.org/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://koalai.org/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://koalai.org/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://koalai.org/assets/css/globals/common.css"><link rel="stylesheet" href="https://koalai.org/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://koalai.org/assets/css/posts/index.css"><link rel="stylesheet" href="https://koalai.org/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://koalai.org/rouge-themes/dist/.css"><link rel="canonical" href="https://koalai.org/2024/04/11/aniportrait-install/"><link rel="alternate" type="application/atom+xml" title="考拉AI" href="https://koalai.org/feed.xml"><link rel="shortcut icon" href="https://koalai.org/favicon.jpg"><meta property="og:title" content="干货教程【AI篇】|腾讯开源数字人工具AniPortrait整合包获取和使用教程"><meta name="keywords" content="AniPortrait, 数字人, AI"><meta name="og:keywords" content="AniPortrait, 数字人, AI"><meta name="description" content="最近腾讯开源了一款数字人工具，直接对标阿里的EMO，github 地址为：https://github.com/Zejun-Yang/AniPortrait主要支持以下两个功能："><meta name="og:description" content="最近腾讯开源了一款数字人工具，直接对标阿里的EMO，github 地址为：https://github.com/Zejun-Yang/AniPortrait主要支持以下两个功能："><meta property="og:url" content="https://koalai.org/2024/04/11/aniportrait-install/"><meta property="og:site_name" content="考拉AI"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2024-04-11"> <script src="https://koalai.org/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://koalai.org/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://koalai.org/" title="考拉AI"> 考拉AI</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://koalai.org/" class="site-header-nav-item" target="" title="首页">首页</a> <a href="https://koalai.org/categories/" class="site-header-nav-item" target="" title="分类">分类</a> <a href="https://koalai.org/archives/" class="mobile-hidden site-header-nav-item" target="" title="归档">归档</a> <a href="https://koalai.org/open-source/" class="mobile-hidden site-header-nav-item" target="" title="开源">开源</a> <a href="https://koalai.org/fragments/" class="site-header-nav-item" target="" title="片段">片段</a> <a href="https://koalai.org/wiki/" class="site-header-nav-item" target="" title="维基">维基</a> <a href="https://koalai.org/links/" class="mobile-hidden site-header-nav-item" target="" title="链接">链接</a> <a href="https://koalai.org/about/" class="site-header-nav-item" target="" title="关于">关于</a> <a class="mobile-hidden" href="https://koalai.org/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="干货教程【AI篇】|腾讯开源数"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">干货教程【AI篇】|腾讯开源数字人工具AniPortrait整合包获取和使用教程</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2024/04/11 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://koalai.org/categories/#AI数字人" title="AI数字人">AI数字人</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 1606 字，约 5 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"> <img style="height:72px;width:72px" src="https://koalai.org/assets/images/qrcode.jpg" alt="考拉AI" /></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><p>最近腾讯开源了一款数字人工具，直接对标阿里的EMO，github 地址为：<a href="https://github.com/Zejun-Yang/AniPortrait">https://github.com/Zejun-Yang/AniPortrait</a> 主要支持以下两个功能：</p><ol><li>脸部重演 通过给定一段视频和一张图片，可以把视频中的人物替换为图片中的人物，支持二次元人物</li><li>音频驱动 通过给定一张人物照片和一段音频，生成一段语音和嘴型同步的视频，支持二次元人物</li></ol><p><strong>电脑配置和环境要求</strong></p><ul><li>系统要求： windows 10 或者11</li><li>显卡要求： 英伟达独立显卡，俗称N卡，要安装好显卡驱动, 显存8G及以上</li><li>内存要求：16G及以上</li><li>硬盘要求： 要有至少30G左右的剩余存储空间，最好是固态硬盘</li></ul><p><strong>本文章主要分为两部分：</strong></p><ol><li>详细介绍 AniPortrait 源码运行环境搭建</li><li>详细介绍 AniPortrait 如何使用。</li></ol><p>由于源码运行环境搭建较为复杂，觉得麻烦的小伙伴可以跳过第一部分，直接下载我为大家准备的整合包，然后按照文章第二部分使用教程操作即可。</p><p><em><a href="https://koalai.org/about/">点击打开我的个人博客网站</a>扫码或者搜索关注公众号<strong>树袋熊AI</strong>，并回复关键词【<strong>AniP</strong>】获取包含模型的整合包</em></p><h2 id="1--aniportrait-源码运行环境搭建">1. AniPortrait 源码运行环境搭建</h2><h3 id="基础软件安装">基础软件安装</h3><p>显卡驱动、cuda、git、ffmpeg、anaconda安装这些我就不再详细介绍了，可以参考<a href="https://blog.csdn.net/qq_17449077/article/details/137027934">Rope源码运行环境搭建这篇博客</a>去安装这些基础软件。另外如果是window10/11的小伙伴可以使用 winget 在终端安装这些软件更加方便，可以在终端通过 “winget search 软件名字” 去搜素，复制id后通过 “winget install 软件id” 去安装。</p><h3 id="源码下载及运行环境搭建">源码下载及运行环境搭建</h3><p>打开Power Shell终端，按照以下步骤运行，注意windows下不要拷贝带#的注释</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. 下载源码，clone失败的话，可以去github下载压缩包解压代替这一步</span>
git clone https://github.com/Zejun-Yang/AniPortrait.git
<span class="c"># 2. 进入源码文件夹</span>
<span class="nb">cd </span>AniPortrait
<span class="c"># 3，创建conda虚拟环境</span>
conda create <span class="nt">-n</span> AniPortrait <span class="nv">python</span><span class="o">=</span>3.10
<span class="c"># 4，激活虚拟环境</span>
conda activate AniPortrait
<span class="c"># 5. 安装软件运行所需的依赖库</span>
pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</code></pre></div></div><h3 id="下载和放置模型">下载和放置模型</h3><p>从下面的5个地址中下载模型，并放到 pretrained_weights 文件夹中： <a href="https://huggingface.co/ZJYang/AniPortrait/tree/main">weights</a> <a href="https://huggingface.co/runwayml/stable-diffusion-v1-5">StableDiffusion V1.5</a> <a href="https://huggingface.co/stabilityai/sd-vae-ft-mse">sd-vae-ft-mse</a> <a href="https://huggingface.co/lambdalabs/sd-image-variations-diffusers/tree/main/image_encoder">image_encoder</a> <a href="https://huggingface.co/facebook/wav2vec2-base-960h/tree/main">wav2vec2-base-960h</a></p><p>所有的模型我已经下载打包好了，获取方式在文末。下载完成后最终模型目录如下： <img src="https://koalai.org/images/2024-04-11-aniportrait-install/799097e729e14f82b8f6ab0349c11ac0.png" alt="在这里插入图片描述" /></p><h3 id="运行aniportrait-源码">运行AniPortrait 源码</h3><p>打开Power Shell终端运行，注意windows下不要拷贝带#的注释</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. 进入源码文件夹</span>
<span class="nb">cd </span>AniPortrait
<span class="c"># 2，进入虚拟环境</span>
conda activate AniPortrait
<span class="c"># 3. 运行代码进行推理, 运行成功后终端会出现一个url链接，浏览器打开链接即可 </span>
python <span class="nt">-m</span> scripts.app 
</code></pre></div></div><p>运行后如果终端报缺失 dll 的错误，请到文末获取 VC_redist 并安装</p><h2 id="2-aniportrait-使用教程">2. AniPortrait 使用教程</h2><p>运行成功后，浏览器打开 url 程序主界面如下： <img src="https://koalai.org/images/2024-04-11-aniportrait-install/864acce41991414a9001ae19dc500698.png" alt="在这里插入图片描述" /></p><p>默认的处理序列长度L是60，比较短，建议修改成0，表示会自动计算序列长度，W和H表示输出视频的长度和宽度，尽量不要调整太高，建议用默认的值，如果想得到高清视频，可以用视频增强软件去处理。</p><p>可以上传自己本地的数据，另外 examples 中也自带了一些测试数据，点击后会自动加载到上传区，点击Generate等待视频生成即可，Result 中会显示最终生成的结果，可以播放或者下载到本地。</p><p>我测试了一下，感觉除了最后几帧效果会比较差，整体效果还不错。</p><p><em><a href="https://koalai.org/about/">点击打开我的个人博客网站</a>扫码或者搜索关注公众号<strong>树袋熊AI</strong>，并回复关键词【<strong>AniP</strong>】获取包含模型的整合包</em></p><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="https://koalai.org" target="_blank">考拉AI</a></li><li>本文链接：<a href="https://koalai.org/2024/04/11/aniportrait-install/" target="_blank">https://koalai.org/2024/04/11/aniportrait-install/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="share"></div><div class="comment"></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://koalai.org/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://koalai.org/assets/search_data.json?v=1712832253', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: { { site.simple_jekyll_search.limit } }, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://koalai.org/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2023 <span title="考拉AI">考拉AI</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/aipangu/aipangu.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://koalai.org/" title="首页" target="">首页</a></li><li> <a href="https://koalai.org/categories/" title="分类" target="">分类</a></li><li> <a href="https://koalai.org/archives/" title="归档" target="">归档</a></li><li> <a href="https://koalai.org/open-source/" title="开源" target="">开源</a></li><li> <a href="https://koalai.org/fragments/" title="片段" target="">片段</a></li><li> <a href="https://koalai.org/wiki/" title="维基" target="">维基</a></li><li> <a href="https://koalai.org/links/" title="链接" target="">链接</a></li><li> <a href="https://koalai.org/about/" title="关于" target="">关于</a></li><li><a href="https://koalai.org/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://koalai.org/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
